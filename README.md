### Maker DAO Simulation
The repository contains code for simulating a population of investors in the DAI Ecosystem 

- `sim.py` is a CLI to run a single market simulation using a test config as input.
- `simulation_util.py` contains general market simulation code for obtaining DAI settling price.
- `single_user.py` contains CVXPY optimization code for an optimal investor.
- `input_generator.py` is a CLI to generate test configs for a factorial experiment.
- `test_runner.py` is a test runner to run a multiple market simulations using multiple test configs.
- `plot_gen.py` generates multiple plots for a single simulation output.
- `util.py` contains all utility functions.

### Setup
- Install `cvxpy, pickle, numpy, scipy, matplotlib`

### [DEPRECATED]
### Running Tests
- `python3 sim.py test type[uniform/normal] logger`
    - Runs with sample size set as 10.  
    - cdpRate and txf inputs can be configured in `sim.py`. 
    - Parameters
        - `type(uniform/normal)` : Type of Wealth Distribution
        - `logger(bool)` : enables logging under `sim-logs`
    - Example: `python3 sim.py test normal 1`
- `python3 sim.py single samples cdpRate txf tests type[uniform/normal] logger` runs a single test with a specified transaction fee, cdprate and wealth distribution. 
    - This can be used to gauge settling price variance for a fixed cdpRate and txf
    - Parameters
        - `samples(int)` : number of investors
        - `cdpRate(float)` : cdpRate for the MAKER Ecosystem
        - `txf(float)` : Transaction Fees
        - `tests(int)` : No of tests to run with cdpRate and txf
        - `type(normal/uniform)` : Type of Wealth Distribution
        - `logger(bool)` : enables logging under `sim-logs`
    - Example: `python3 sim.py single 10 0.04 0.05 2 normal 1`
- `bash runner.sh` runs two tests i.e. one with normal wealth distribution and the other with a uniform wealth distribution.

### Log Structure
- Logs are generated by `runner.sh` under `logs.zip`. 
- `logs.zip` must contain 2 directories.
    - test1/
        - log text files for each sub-test
        - sim-summary.pickle
    - test2/
        - log text files for each sub-test
        - sim-summary.pickle 
- `sim-summary.pickle` is used to generate plots via `Plotter.ipynb`         
